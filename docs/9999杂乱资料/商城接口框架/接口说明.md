# 前台模块相关接口
## 一、获取一级分类信息(首页快速分类导航)
请求URL：

- /api/getcate

请求方式：

- GET
## 二、获取商品全部分类信息(全部分类，数据呈递归树状)

请求URL：

- /api/getcates

请求方式：

- GET

  ```json
  {
      "msg": "操作成功",
      "code": 200,
      "list": [
          {
              "id": 1,
              "pid": 0,
              "catename": "家用电器",
              "img": "",
              "status": 1,
              "children": [
                  {
                      "id": 7,
                      "pid": 1,
                      "catename": "电视",
                      "img": "/uploads/category/fc3abc50-6c2c-11ea-b86c-579aced212c2.jpg",
                      "status": 1
                  },
                  {
                      "id": 8,
                      "pid": 1,
                      "catename": "空调",
                      "img": "/uploads/category/354b31f0-6c2d-11ea-b86c-579aced212c2.jpg",
                      "status": 1
                  }
              ]
          },
          {
              "id": 2,
              "pid": 0,
              "catename": "手机通讯",
              "img": "",
              "status": 1,
              "children": [
                  {
                      "id": 10,
                      "pid": 2,
                      "catename": "诺基亚手机",
                      "img": "/uploads/category/fee7e580-6c2d-11ea-b86c-579aced212c2.png",
                      "status": 1
                  },
                  {
                      "id": 12,
                      "pid": 2,
                      "catename": "手机配件",
                      "img": "/uploads/category/764b6740-9673-11ea-b348-a734901db180.jpg",
                      "status": 1
                  }
              ]
          },
          {
              "id": 3,
              "pid": 0,
              "catename": "电脑办公",
              "img": "",
              "status": 1,
              "children": [
                  {
                      "id": 11,
                      "pid": 3,
                      "catename": "笔记本",
                      "img": "/uploads/category/ddb0b9f0-6de0-11ea-a8e1-0d680bf54839.jpg",
                      "status": 1
                  },
              ]
          },
          {
              "id": 4,
              "pid": 0,
              "catename": "家居",
              "img": "",
              "status": 1
          }
      ]
  }
  ```

  

## 三、获取轮播图信息(首页)
请求URL：

- /api/getbanner

请求方式：

- GET
## 四、获取限时秒杀信息(首页)
请求URL：

- /api/getseckill

请求方式：

- GET
## 五、获取商品信息(首页)
请求URL：

- /api/gethortgoods

请求方式：

- GET

```
{
    "msg": "操作成功",
    "code": 200,
    "list": [
        {
            "content": [
                {
                    "id": 5,
                    "goodsname": "华为MateBook13",
                    "price": 4299,
                    "market_price": 4597,
                    "img": "/uploads/2a3e16d0-5ef6-11eb-8407-bb52993c067f.jpg"
                },
                {
                    "id": 6,
                    "goodsname": "华为MateBook14",
                    "price": 5299,
                    "market_price": 4597,
                    "img": "/uploads/08188b00-5ee5-11eb-9611-cfb4d6b321e9.jpg"
                }
            ]
        },
        {
            "content": [
                {
                    "id": 2,
                    "goodsname": "联想小新",
                    "price": 4499,
                    "market_price": 4699,
                    "img": "/uploads/2747d670-6de1-11ea-a8e1-0d680bf54839.jpg"
                },
                {
                    "id": 3,
                    "goodsname": "荣耀9X",
                    "price": 1299,
                    "market_price": 1399,
                    "img": "/uploads/d6a0eff0-70be-11ea-91a2-9395060d7390.jpg"
                }
            ]
        },
        {
            "content": [
                {
                    "id": 1,
                    "goodsname": "小米10",
                    "price": 3999,
                    "market_price": 3999,
                    "img": "/uploads/d6a0eff0-70be-11ea-91a2-9395060d7390.jpg"
                },
                {
                    "id": 2,
                    "goodsname": "联想小新",
                    "price": 4499,
                    "market_price": 4699,
                    "img": "/uploads/2747d670-6de1-11ea-a8e1-0d680bf54839.jpg"
                },
                {
                    "id": 3,
                    "goodsname": "荣耀9X",
                    "price": 1299,
                    "market_price": 1399,
                    "img": "/uploads/d6a0eff0-70be-11ea-91a2-9395060d7390.jpg"
                }
            ]
        }
    ]
}
```



## 六、搜索（like模糊搜索）

请求URL：

- /api/search

请求方式：

- GET

参数：

| 参数名      | 说明        |
| -------- | --------- |
| keywords | 搜索关键字，必填项 |



## 七、获取一级分类下的所有商品

请求URL：

- /api/getgoodlist

请求方式：

- GET

参数：

| 参数名 | 说明             |
| :----- | ---------------- |
| cateid | 分类编号，必填项 |
| type   | 1  [number]      |



## 九、获取二级分类下的所有商品

请求URL：

- /api/getgoodlist

请求方式：

- GET

参数：

| 参数名 | 说明             |
| :----- | ---------------- |
| cateid | 分类编号，必填项 |
| type   | 2  [number]      |



## 十、获取一个商品信息

请求URL：

- /api/getgoodsinfo

请求方式：

- GET

参数：

| 参数名  | 说明       |
| :--- | -------- |
| id   | 商品编号，必填项 |

## 十一、会员注册（vue项目）
请求URL：

- /api/register

请求方式：

- POST

参数：

| 参数名      | 说明   |
| :------- | ---- |
| phone    | 手机号  |
| nickname | 昵称   |
| password | 密码   |

## 十二、会员登录（vue项目）
请求URL：

- /api/login

请求方式：

- POST

参数：

| 参数名      | 说明   |
| :------- | ---- |
| phone    | 手机号  |
| password | 密码   |

## 十三、购物车列表
请求URL：

- /api/cartlist

请求方式：

- GET

参数：

| 参数名           | 说明                      |
| :------------ | ----------------------- |
| uid           | 用户编号，必填项                |
| authorization | header头中需要添加token后台验证条件 |

返回示例：

```json
{
    "msg": "操作成功",
    "code": 200,
    "list": [
        {
            "id": 3,
            "uid": "3d5fbe80-292f-11ed-a698-310c5dd919a0",
            "goodsid": 3,
            "num": 1,
            "status": 1,
            "goodsname": "荣耀9X",
            "price": 1299,
            "img": "/uploads/d6a0eff0-70be-11ea-91a2-9395060d7390.jpg"
        }
    ]
}
```



## 十四、购物车添加

请求URL：

- /api/cartadd

请求方式：

- POST

参数：

| 参数名           | 说明                      |
| :------------ | ----------------------- |
| uid           | 用户编号，必填项                |
| goodsid       | 商品编号，必填项                |
| num           | 数量，必填项                  |
| authorization | header头中需要添加token后台验证条件 |

## 十五、购物车修改
请求URL：

- /api/cartedit

请求方式：

- POST

参数：

| 参数名        | 说明                                |
| :------------ | ----------------------------------- |
| id            | 购物车编号，必填项                  |
| type          | 操作类型 1减少  2增加               |
| authorization | header头中需要添加token后台验证条件 |

## 十六、购物车删除
请求URL：

- /api/cartdelete

请求方式：

- POST

参数：

| 参数名           | 说明                      |
| :------------ | ----------------------- |
| id            | 购物车编号，必填项               |
| authorization | header头中需要添加token后台验证条件 |





## 十七、订单生成

请求URL：

- /api/orderadd

请求方式：

- POST

##### 请求参数header部分

| 参数名称      | 参数值           |
| ------------- | ---------------- |
| content-Type  | application/json |
| authorization | token            |

##### 请求参数body部分

注意请求整体参数结构如下：

```
{
    "uid":"6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe",
    "countmoney":10598,
    "countnumber":2,
    "address":1,
    "idstr": "8,4"
}

```

参数详情：

| 参数名称    | 约束 | 类型            | 长度 | 描述         | 取值说明                      |
| ----------- | ---- | --------------- | ---- | ------------ | ----------------------------- |
| uid         | 1    | String          | 50   | 用户ID       | 用户编号，必填                |
| countmoney  | 1    | decimal（10,2） | 10   | 支付金额     | 保留两位小数点，必填          |
| countnumber | 1    | number          | 5    | 购买商品数量 | 必填                          |
| addressid   | 1    | number          | 1    | 收获地址id   | 必填                          |
| idstr       | 1    | String          | 20   | 购物车数据id | 必须为字符串如：“1,2,3”, 必填 |

##### 返回数据

数据格式

```
{
	"msg": "提交订单成功",
	"code": 200,
	"list": {
		"outTradeNo": "1611537265071257757"
	}
}
```



| 状态码 | 描述                   |
| ------ | ---------------------- |
| 200    | 提交订单成功           |
| 400    | 数据没有找到           |
| 403    | 登录失效或访问路由受限 |
| 404    | 请求路由没有找到       |
| 500    | 缺少参数               |

##### 举例

```
请求头信息：
Content-Type:application/json
authorization:eyJzZWMiOiJSU0EiLCJ0eXBlIjoiSldUIn0=.e...................
请求报文：
{
     "uid":"6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe",
     "address":1,
     "countmoney":10598,
     "countnumber":2,
     "idstr": "8,4"
}
响应报文
{
	"msg": "提交订单成功",
	"code": 200,
	"list": {
		"outTradeNo": "1611537265071257757"
	}
}

```

#### 

## 十八、订单查询

请求URL：

- /api/orderlist

请求方式：

- GET

参数：

| 参数名        | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| uid           | 用户id,必填项                                                |
| authorization | header头中需要添加token后台验证条件                          |
| status        | 订单状态，0是待支付 1是待发货  2待确认 3待评价 4订单完成 5订单取消，选填 |

## 十九、地址查询

##### 接口功能

查询一条、多条地址数据

##### URL

/api/addresslist

##### 支持格式

JSON

##### HTTP请求方式

GET

##### 请求参数header部分

| 参数名称      | 参数值           |
| :------------ | :--------------- |
| content-Type  | application/json |
| authorization | token            |

##### 请求参数body部分

| 参数名称 | 约束 | 类型   | 长度 | 描述     | 取值说明                  |
| :------- | :--- | :----- | :--- | :------- | :------------------------ |
| uid      | 1    | string | 50   | 用户uid  | 用户编号，必填            |
| id       | 1    | number | 10   | 数据id   | 地址编号，选填            |
| status   | 1    | number | 1    | 地址状态 | 1：默认地址 0：正常，选填 |

##### 返回数据

数据格式

```
{
	"msg": "操作成功",
	"code": 200,
	"list": [
		{
			"id": 1,
			"uid": "6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe",
			"username": "关羽",
			"userphone": "13716052241",
			"regioncode": "",
			"location": "北京市北京市朝阳区",
			"useraddress": "五方桥中公教育基地",
			"status": 0,
			"label": "学校"
		}
	]
}

```



| 状态码 | 描述                   |
| :----- | :--------------------- |
| 200    | 查询成功               |
| 400    | 数据没有找到           |
| 403    | 登录失效或访问路由受限 |
| 404    | 请求路由没有找到       |
| 500    | 缺少参数               |

##### 举例

```json
请求头信息：
Content-Type:application/json
authorization:eyJzZWMiOiJSU0EiLCJ0eXBlIjoiSldUIn0=.e...................
请求报文：
{
    id: 1，
    uid:"6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe"
}
响应报文
{
	"msg": "操作成功",
	"code": 200,
	"list": [
		{
			"id": 1,
			"uid": "6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe",
			"username": "关羽",
			"userphone": "13716052241",
			"regioncode": "",
			"location": "北京市北京市朝阳区",
			"useraddress": "北京市朝阳区五方桥中公教育基地",
			"status": 0,
			"label": "学校"
		}
	]
}
```



## 二十、地址添加

##### 接口功能

添加收货地址

##### URL

/api/addressadd

##### 支持格式

JSON

##### HTTP请求方式

POST

##### 请求参数header部分

| 参数名称      | 参数值           |
| :------------ | :--------------- |
| content-Type  | application/json |
| authorization | token            |

##### 请求参数body部分

| 参数名称    | 约束 | 类型   | 长度 | 描述         | 取值说明                         |
| :---------- | :--- | :----- | :--- | :----------- | :------------------------------- |
| uid         | 1    | string | 50   | 用户uid      | 用户编号，必填                   |
| username    | 1    | string | 10   | 收货人姓名   | 必填                             |
| userphone   | 1    | string | 11   | 收货人手机号 | 必填                             |
| regioncode  | 1    | string | 20   | 地区码       | 选填                             |
| location    | 1    | string | 20   | 地区字符串   | 如：‘山东省滨州市无棣县’，必填   |
| useraddress | 1    | string | 50   | 详情地址     | 如：‘棣新一路圣豪购物广场’，必填 |
| status      | 1    | number | 1    | 地址状态     | 1是默认地址，0不是，选填         |
| label       | 1    | string |      | 地址标签     | 如：‘公司’，‘家’，‘学校’，选填   |

##### 返回数据

数据格式

```
{
	"msg": "地址添加成功",
	"code": 200,
	"list": []
}
```



| 状态码 | 描述                   |
| :----- | :--------------------- |
| 200    | 添加成功               |
| 400    | 数据没有找到           |
| 403    | 登录失效或访问路由受限 |
| 404    | 请求路由没有找到       |
| 500    | 缺少参数               |

##### 举例

```vue
请求头信息：
Content-Type:application/json
authorization:eyJzZWMiOiJSU0EiLCJ0eXBlIjoiSldUIn0=.e...................
请求报文：
{
    
    uid:'6e7dd8d0-f1b4-11ea-84da-07a5d6e2f2fe',
    username:'曹操',
    userphone:13716052241,
    regioncode:"",
    location:'北京市市辖区朝阳区',
    useraddress:'五方桥中公教育基地',
    status:1,
    label:'公司'
        
}
响应报文
{
	"msg": "地址添加成功",
	"code": 200,
	"list": []
}
```



## 二十一、地址编辑

##### 接口功能

修改收货地址

##### URL

 http://localhost:3000/api/addressedit

##### 支持格式

JSON

##### HTTP请求方式

POST

##### 请求参数header部分

| 参数名称      | 参数值           |
| :------------ | :--------------- |
| content-Type  | application/json |
| authorization | token            |

##### 请求参数body部分

| 参数名称    | 约束 | 类型   | 长度 | 描述         | 取值说明                         |
| :---------- | :--- | :----- | :--- | :----------- | :------------------------------- |
| id          | 1    | number | 50   | 地址id       | 地址编号，必填                   |
| username    | 1    | string | 10   | 收货人姓名   | 必填                             |
| userphone   | 1    | string | 11   | 收货人手机号 | 必填                             |
| regioncode  | 1    | string | 20   | 地区码       | 选填                             |
| location    | 1    | string | 20   | 地区字符串   | 如：‘山东省滨州市无棣县’，必填   |
| useraddress | 1    | string | 50   | 详情地址     | 如：‘棣新一路圣豪购物广场’，必填 |
| status      | 1    | number | 1    | 地址状态     | 1是默认地址，0是不是，选填       |
| label       | 1    | string |      | 地址标签     | 如：‘公司’，‘家’，‘学校’，选填   |

##### 返回数据

数据格式

```
{
	"msg": "操作成功",
	"code": 200,
	"list": []
}
```



| 状态码 | 描述                   |
| :----- | :--------------------- |
| 200    | 编辑成功               |
| 400    | 数据没有找到           |
| 403    | 登录失效或访问路由受限 |
| 404    | 请求路由没有找到       |
| 500    | 缺少参数               |

##### 举例

```
请求头信息：
Content-Type:application/json
authorization:eyJzZWMiOiJSU0EiLCJ0eXBlIjoiSldUIn0=.e...................
请求报文：
{
    
    id:22,
    username:'曹操',
    userphone:13716052241,
    regioncode:"",
    location:'北京市市辖区朝阳区',
    useraddress:'五方桥中公教育基地',
    status:1,
    label:'公司'
        
}
响应报文
{
	"msg": "操作成功",
	"code": 200,
	"list": []
}
```



## 二十二、地址删除

##### 接口功能

删除一条收货地址数据

##### URL

 http://localhost:3000/api/addressremove

##### 支持格式

JSON

##### HTTP请求方式

POST

##### 请求参数header部分

| 参数名称      | 参数值           |
| :------------ | :--------------- |
| content-Type  | application/json |
| authorization | token            |

##### 请求参数body部分

| 参数名称 | 约束 | 类型   | 长度 | 描述   | 取值说明       |
| :------- | :--- | :----- | :--- | :----- | :------------- |
| id       | 1    | number | 10   | 地址id | 地址编号，必填 |

##### 返回数据

数据格式

```
{
	"msg": "删除成功",
	"code": 200,
	"list": []
}
```



| 状态码 | 描述                   |
| :----- | :--------------------- |
| 200    | 删除成功               |
| 400    | 数据没有找到           |
| 403    | 登录失效或访问路由受限 |
| 404    | 请求路由没有找到       |
| 500    | 缺少参数               |

##### 举例

```
请求头信息：
Content-Type:application/json
authorization:eyJzZWMiOiJSU0EiLCJ0eXBlIjoiSldUIn0=.e...................
请求报文：
{
    
    id:22    
}
响应报文
{
	"msg": "删除成功",
	"code": 200,
	"list": []
}
```



### 



## 二十三、发送短信验证码

请求URL：

- /api/sms

请求方式：

- GET

| 参数名   | 说明   |
| ----- | ---- |
| phone | 手机号  |



## 二十四、微信小程序短信登录（新用户登录即注册，老用户即登录）

请求URL：

- /api/wxlogin

请求方式：

- GET

参数：

| 参数名   | 说明    |
| ----- | ----- |
| phone | 登录手机号 |
|       |       |

## 二十五、微信登录测试使用（新用户登录即注册，老用户即登录）

请求URL：

- /api/wxceshilogin

请求方式：

- GET

参数：

| 参数名  | 说明                 |
| ---- | ------------------ |
| code | 用户登录凭证（有效期五分钟），必填项 |
|      |                    |

## 二十六、token有效期检测接口

请求URL：

- /api/checktoken

请求方式：

- GET

参数：

| 参数名           | 说明                      |
| ------------- | ----------------------- |
| authorization | header头中需要添加token后台验证条件 |
|               |                         |









| 接口名称     | 调用地址                                     | 调用方式 |
| -------- | ---------------------------------------- | ---- |
| 短信发送     | http://localhost:3000/api/sms            | GET  |
| 用户登录     | http://localhost:3000/api/wxlogin        | GET  |
| 检测token  | http://localhost:3000/api/checktoken     | GET  |
| 首页导航分类   | http://localhost:3000/api/getcate        | GET  |
| 首页分类详情   | http://localhost:3000/api/getcates       | GET  |
| 首页轮播图    | http://localhost:3000/api/getbanner      | GET  |
| 首页秒杀详情   | http://localhost:3000/api/getseckill     | GET  |
| 首页推荐商品   | http://localhost:3000/api/getindexgoods  | GET  |
| 商品搜索     | http://localhost:3000/api/search         | GET  |
| 一级分类商品列表 | http://localhost:3000/api/getcategoodPage | GET  |
| 二级分类商品列表 | http://localhost:3000/api/getsecondcategoodPage | GET  |
| 商品详情     | http://localhost:3000/api/getgoodsinfo   | GET  |
| 加入购物车    | http://localhost:3000/api/cartadd        | POST |
| 删除购物车    | http://localhost:3000/api/cartdelete     | POST |
| 修改购物车    | http://localhost:3000/api/cartedit       | POST |
| 查询购物车    | http://localhost:3000/api/cartlist       | GET  |
| 订单生成     | http://localhost:3000/api/orderadd       | POST |
| 订单查询     | http://localhost:3000/api/orderlist      | GET  |